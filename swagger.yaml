openapi: 3.0.1
info:
  title: OpenAPI definition
  version: v0
servers:
- url: https://localhost:32555
  description: Generated server url
paths:
  /{serviceProviderName}/subscriptions:
    get:
      tags:
      - onboard-rest-controller
      operationId: listSubscriptions
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListSubscriptionsResponse'
    post:
      tags:
      - onboard-rest-controller
      operationId: addSubscriptions
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddSubscriptionsRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/AddSubscriptionsResponse'
  /{serviceProviderName}/privatechannels:
    get:
      tags:
      - onboard-rest-controller
      operationId: getPrivateChannels
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListPrivateChannelsResponse'
    post:
      tags:
      - onboard-rest-controller
      operationId: addPrivateChannel
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddPrivateChannelRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddPrivateChannelResponse'
  /{serviceProviderName}/deliveries:
    get:
      tags:
      - onboard-rest-controller
      operationId: listDeliveries
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListDeliveriesResponse'
    post:
      tags:
      - onboard-rest-controller
      operationId: addDeliveries
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddDeliveriesRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddDeliveriesResponse'
  /{serviceProviderName}/capabilities:
    get:
      tags:
      - onboard-rest-controller
      operationId: listCapabilities
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListCapabilitiesResponse'
    post:
      tags:
      - onboard-rest-controller
      operationId: addCapabilities
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddCapabilitiesRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddCapabilitiesResponse'
  /{serviceProviderName}/subscriptions/{subscriptionId}:
    get:
      tags:
      - onboard-rest-controller
      operationId: getServiceProviderSubscription
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: subscriptionId
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSubscriptionResponse'
  /{serviceProviderName}/privatechannels/{privateChannelId}:
    get:
      tags:
      - onboard-rest-controller
      operationId: getPrivateChannel
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: privateChannelId
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/GetPrivateChannelResponse'
    delete:
      tags:
      - onboard-rest-controller
      operationId: deletePrivateChannel
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: privateChannelId
        in: path
        required: true
        schema:
          type: string
      responses:
        "204":
          description: No Content
  /{serviceProviderName}/privatechannels/peer:
    get:
      tags:
      - onboard-rest-controller
      operationId: getPeerPrivateChannels
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/ListPeerPrivateChannels'
  /{serviceProviderName}/network/capabilities:
    get:
      tags:
      - onboard-rest-controller
      operationId: fetchMatchingCapabilities
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: arg1
        in: query
        required: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FetchMatchingCapabilitiesResponse'
  /{serviceProviderName}/deliveries/{deliveryId}:
    get:
      tags:
      - onboard-rest-controller
      operationId: getDelivery
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: deliveryId
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetDeliveryResponse'
    delete:
      tags:
      - onboard-rest-controller
      operationId: deleteDelivery
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: deliveryId
        in: path
        required: true
        schema:
          type: string
      responses:
        "204":
          description: No Content
  /{serviceProviderName}/capabilities/{capabilityId}:
    get:
      tags:
      - onboard-rest-controller
      operationId: getServiceProviderCapability
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: capabilityId
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCapabilityResponse'
    delete:
      tags:
      - onboard-rest-controller
      operationId: deleteCapability
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: capabilityId
        in: path
        required: true
        schema:
          type: string
      responses:
        "204":
          description: No Content
  /getServiceProviders:
    get:
      tags:
      - onboard-rest-controller
      operationId: getServiceProviders
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ServiceProvider'
  /{serviceProviderName}/subscriptions/{dataTypeId}:
    delete:
      tags:
      - onboard-rest-controller
      operationId: deleteSubscription
      parameters:
      - name: serviceProviderName
        in: path
        required: true
        schema:
          type: string
      - name: dataTypeId
        in: path
        required: true
        schema:
          type: string
      responses:
        "204":
          description: No Content
components:
  schemas:
    AddSubscription:
      type: object
      properties:
        selector:
          type: string
        consumerCommonName:
          type: string
    AddSubscriptionsRequest:
      type: object
      properties:
        name:
          type: string
        version:
          type: string
        subscriptions:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/AddSubscription'
    AddSubscriptionsResponse:
      type: object
      properties:
        version:
          type: string
        name:
          type: string
        subscriptions:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalActorSubscription'
    LocalActorSubscription:
      type: object
      properties:
        id:
          type: string
        path:
          type: string
        selector:
          type: string
        consumerCommonName:
          type: string
        lastUpdatedTimeStamp:
          type: integer
          format: int64
          writeOnly: true
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - ILLEGAL
          - NOT_VALID
          - RESUBSCRIBE
    AddPrivateChannelRequest:
      type: object
      properties:
        version:
          type: string
        name:
          type: string
        privateChannels:
          type: array
          items:
            $ref: '#/components/schemas/PrivateChannelApi'
    PrivateChannelApi:
      type: object
      properties:
        id:
          type: integer
          format: int32
        peerName:
          type: string
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - TEAR_DOWN
        endpoint:
          $ref: '#/components/schemas/PrivateChannelEndpointApi'
    PrivateChannelEndpointApi:
      type: object
      properties:
        host:
          type: string
        port:
          type: integer
          format: int32
        queueName:
          type: string
    AddPrivateChannelResponse:
      type: object
      properties:
        version:
          type: string
        name:
          type: string
        privateChannels:
          type: array
          items:
            $ref: '#/components/schemas/PrivateChannelApi'
        privateChannelApis:
          type: array
          writeOnly: true
          items:
            $ref: '#/components/schemas/PrivateChannelApi'
    AddDeliveriesRequest:
      type: object
      properties:
        version:
          type: string
        name:
          type: string
        deliveries:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/SelectorApi'
    SelectorApi:
      type: object
      properties:
        selector:
          type: string
    AddDeliveriesResponse:
      type: object
      properties:
        version:
          type: string
        name:
          type: string
        deliveries:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/Delivery'
    Delivery:
      type: object
      properties:
        id:
          type: string
        path:
          type: string
        selector:
          type: string
        lastUpdatedTimestamp:
          type: integer
          format: int64
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - ILLEGAL
          - NOT_VALID
          - NO_OVERLAP
    AddCapabilitiesRequest:
      type: object
      properties:
        name:
          type: string
        version:
          type: string
        capabilities:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/CapabilitySplitApi'
    ApplicationApi:
      type: object
      properties:
        messageType:
          type: string
        publisherId:
          type: string
        publicationId:
          type: string
        originatingCountry:
          type: string
        protocolVersion:
          type: string
        quadTree:
          uniqueItems: true
          type: array
          items:
            type: string
      discriminator:
        propertyName: messageType
    CamApplicationApi:
      type: object
      allOf:
      - $ref: '#/components/schemas/ApplicationApi'
    CapabilitySplitApi:
      type: object
      properties:
        application:
          oneOf:
          - $ref: '#/components/schemas/ApplicationApi'
          - $ref: '#/components/schemas/CamApplicationApi'
          - $ref: '#/components/schemas/DatexApplicationApi'
          - $ref: '#/components/schemas/DenmApplicationApi'
          - $ref: '#/components/schemas/IvimApplicationApi'
          - $ref: '#/components/schemas/MapemApplicationApi'
          - $ref: '#/components/schemas/SpatemApplicationApi'
          - $ref: '#/components/schemas/SremApplicationApi'
          - $ref: '#/components/schemas/SsemApplicationApi'
        metadata:
          $ref: '#/components/schemas/MetadataApi'
    DatexApplicationApi:
      type: object
      allOf:
      - $ref: '#/components/schemas/ApplicationApi'
      - type: object
        properties:
          publicationType:
            type: string
    DenmApplicationApi:
      type: object
      allOf:
      - $ref: '#/components/schemas/ApplicationApi'
      - type: object
        properties:
          causeCodes:
            uniqueItems: true
            type: array
            items:
              type: integer
              format: int32
          causeCode:
            uniqueItems: true
            type: array
            writeOnly: true
            items:
              type: integer
              format: int32
    IvimApplicationApi:
      type: object
      allOf:
      - $ref: '#/components/schemas/ApplicationApi'
    MapemApplicationApi:
      type: object
      allOf:
      - $ref: '#/components/schemas/ApplicationApi'
    MetadataApi:
      type: object
      properties:
        shardCount:
          type: integer
          format: int32
        infoUrl:
          type: string
        redirectPolicy:
          type: string
          enum:
          - OPTIONAL
          - MANDATORY
          - NOT_AVAILABLE
        maxBandwidth:
          type: integer
          format: int32
        maxMessageRate:
          type: integer
          format: int32
        repetitionInterval:
          type: integer
          format: int32
    SpatemApplicationApi:
      type: object
      allOf:
      - $ref: '#/components/schemas/ApplicationApi'
    SremApplicationApi:
      type: object
      allOf:
      - $ref: '#/components/schemas/ApplicationApi'
    SsemApplicationApi:
      type: object
      allOf:
      - $ref: '#/components/schemas/ApplicationApi'
    AddCapabilitiesResponse:
      type: object
      properties:
        name:
          type: string
        capabilities:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalActorCapability'
    LocalActorCapability:
      type: object
      properties:
        id:
          type: string
        path:
          type: string
        definition:
          $ref: '#/components/schemas/CapabilitySplitApi'
    ListSubscriptionsResponse:
      type: object
      properties:
        name:
          type: string
        version:
          type: string
        subscriptions:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalActorSubscription'
    GetSubscriptionResponse:
      type: object
      properties:
        id:
          type: string
        path:
          type: string
        selector:
          type: string
        consumerCommonName:
          type: string
        lastUpdatedTimestamp:
          type: integer
          format: int64
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - ILLEGAL
          - NOT_VALID
          - RESUBSCRIBE
        endpoints:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalEndpointApi'
    LocalEndpointApi:
      type: object
      properties:
        host:
          type: string
        port:
          type: integer
          format: int32
        source:
          type: string
        maxBandwidth:
          type: integer
          format: int32
        maxMessageRate:
          type: integer
          format: int32
    ListPrivateChannelsResponse:
      type: object
      properties:
        version:
          type: string
        name:
          type: string
        privateChannels:
          type: array
          items:
            $ref: '#/components/schemas/PrivateChannelApi'
    GetPrivateChannelResponse:
      type: object
      properties:
        id:
          type: integer
          format: int32
        peerName:
          type: string
        serviceProviderName:
          type: string
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - TEAR_DOWN
        endpoint:
          $ref: '#/components/schemas/PrivateChannelEndpointApi'
    ListPeerPrivateChannels:
      type: object
      properties:
        name:
          type: string
        privateChannels:
          type: array
          items:
            $ref: '#/components/schemas/PeerPrivateChannelApi'
    PeerPrivateChannelApi:
      type: object
      properties:
        id:
          type: integer
          format: int32
        serviceProviderName:
          type: string
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - TEAR_DOWN
        endpoint:
          $ref: '#/components/schemas/PrivateChannelEndpointApi'
    FetchMatchingCapabilitiesResponse:
      type: object
      properties:
        name:
          type: string
        selector:
          type: string
        capabilities:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/CapabilitySplitApi'
        version:
          type: string
    ListDeliveriesResponse:
      type: object
      properties:
        version:
          type: string
        name:
          type: string
        deliveries:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/Delivery'
    DeliveryEndpoint:
      type: object
      properties:
        host:
          type: string
        port:
          type: integer
          format: int32
        target:
          type: string
        maxBandwidth:
          type: integer
          format: int32
        maxMessageRate:
          type: integer
          format: int32
    GetDeliveryResponse:
      type: object
      properties:
        id:
          type: string
        endpoints:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/DeliveryEndpoint'
        path:
          type: string
        selector:
          type: string
        lastUpdatedTimestamp:
          type: integer
          format: int64
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - ILLEGAL
          - NOT_VALID
          - NO_OVERLAP
    ListCapabilitiesResponse:
      type: object
      properties:
        name:
          type: string
        capabilities:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalActorCapability'
    GetCapabilityResponse:
      type: object
      properties:
        id:
          type: string
        path:
          type: string
        definition:
          $ref: '#/components/schemas/CapabilitySplitApi'
    Application:
      type: object
      properties:
        publisherId:
          type: string
        publicationId:
          type: string
        originatingCountry:
          type: string
        protocolVersion:
          type: string
        quadTree:
          uniqueItems: true
          type: array
          items:
            type: string
        singleValuesBase:
          type: object
          additionalProperties:
            type: string
    Capabilities:
      type: object
      properties:
        lastCapabilityExchange:
          type: string
          format: date-time
        status:
          type: string
          enum:
          - UNKNOWN
          - KNOWN
          - FAILED
        capabilities:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/CapabilitySplit'
        lastUpdated:
          type: string
          format: date-time
        createdCapabilities:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/CapabilitySplit'
    CapabilitySplit:
      type: object
      properties:
        id:
          type: integer
          format: int32
        application:
          $ref: '#/components/schemas/Application'
        metadata:
          $ref: '#/components/schemas/Metadata'
        status:
          type: string
          enum:
          - CREATED
          - TEAR_DOWN
        sharded:
          type: boolean
    LocalConnection:
      type: object
      properties:
        id:
          type: integer
          format: int32
        source:
          type: string
        destination:
          type: string
    LocalDelivery:
      type: object
      properties:
        id:
          type: integer
          format: int32
        endpoints:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalDeliveryEndpoint'
        path:
          type: string
        selector:
          type: string
        lastUpdatedTimestamp:
          type: string
          format: date-time
        exchangeName:
          type: string
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - ILLEGAL
          - TEAR_DOWN
          - NOT_VALID
          - NO_OVERLAP
    LocalDeliveryEndpoint:
      type: object
      properties:
        host:
          type: string
        port:
          type: integer
          format: int32
        target:
          type: string
        maxBandwidth:
          type: integer
          format: int32
        maxMessageRate:
          type: integer
          format: int32
    LocalEndpoint:
      type: object
      properties:
        source:
          type: string
        host:
          type: string
        port:
          type: integer
          format: int32
        maxBandwidth:
          type: integer
          format: int32
        maxMessageRate:
          type: integer
          format: int32
    LocalSubscription:
      type: object
      properties:
        id:
          type: integer
          format: int32
        status:
          type: string
          enum:
          - REQUESTED
          - CREATED
          - TEAR_DOWN
          - RESUBSCRIBE
          - ILLEGAL
        selector:
          type: string
        lastUpdated:
          type: string
          format: date-time
        consumerCommonName:
          type: string
        localEndpoints:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalEndpoint'
        connections:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalConnection'
        subscriptionWanted:
          type: boolean
    Metadata:
      type: object
      properties:
        infoUrl:
          type: string
        shardCount:
          type: integer
          format: int32
        redirectPolicy:
          type: string
          enum:
          - OPTIONAL
          - MANDATORY
          - NOT_AVAILABLE
        maxBandwidth:
          type: integer
          format: int32
        maxMessageRate:
          type: integer
          format: int32
        repetitionInterval:
          type: integer
          format: int32
        shards:
          type: array
          items:
            $ref: '#/components/schemas/Shard'
        exchangesFromShards:
          uniqueItems: true
          type: array
          items:
            type: string
    ServiceProvider:
      type: object
      properties:
        name:
          type: string
        id:
          type: integer
          format: int32
        capabilities:
          $ref: '#/components/schemas/Capabilities'
        subscriptions:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalSubscription'
        deliveries:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/LocalDelivery'
        subscriptionUpdated:
          type: string
          format: date-time
    Shard:
      type: object
      properties:
        shardId:
          type: integer
          format: int32
        exchangeName:
          type: string
        selector:
          type: string
